<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>WFTDM Documentation - Highway &amp; Transit Networks Updates</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../_pictures/favicon.ico" rel="icon">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script type="module" src="../../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">


</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="https://wfrc.org" class="navbar-brand navbar-brand-logo">
    <img src="../../../_pictures/wf-logo-new-white-t.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html" rel="" target="">
 <span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-version-9-series" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Version 9 Series</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-version-9-series">    
        <li>
    <a class="dropdown-item" href="../../../v9x/v910/index.html" rel="" target="">
 <span class="dropdown-text">Version 9.1.0</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../v9x/v902/index.html" rel="" target="">
 <span class="dropdown-text">Version 9.0.2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../v9x/v901/index.html" rel="" target="">
 <span class="dropdown-text">Version 9.0.1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../v9x/v900/index.html" rel="" target="">
 <span class="dropdown-text">Version 9.0.0</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-past-versions" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Past Versions</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-past-versions">    
        <li>
    <a class="dropdown-item" href="../../../v8x/v832/index.html" rel="" target="">
 <span class="dropdown-text">Version 8.3.2 - Draft Release</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../v8x/v831/index.html" rel="" target="">
 <span class="dropdown-text">Version 8.3.1 - Draft Release</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../v8x/v830/index.html" rel="" target="">
 <span class="dropdown-text">Version 8.3.0 - Draft Release</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
    <a href="https://github.com/WFRCAnalytics/TDM-Documentation/tree/gh-pages" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
    <a href="mailto:sswim@wfrc.org" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-envelope"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><span style="color: #3E6682;font-size: 25px;">**Version 9.0.0**</span></li><li class="breadcrumb-item"><a href="../../../v9x/v900/whats-new/1-overview.html"><span style="color: #3E6682;">**Whats New Document**</span></a></li><li class="breadcrumb-item"><a href="../../../v9x/v900/whats-new/4-networks.html">4 Highway &amp; Transit Networks Updates</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text"><span style="color: #3E6682;font-size: 25px;"><strong>Version 9.0.0</strong></span></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/downloads.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Downloads</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text"><span style="color: #3E6682;"><strong>Whats New Document</strong></span></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/1-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1 Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/2-taz.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2 Traffic Analysis Zone Updates</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/3-sedata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3 Socioeconomic Data Updates</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/4-networks.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">4 Highway &amp; Transit Networks Updates</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/5-baseyear.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5 Model 2019 Base-Year Updates</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/6-modelenhancements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">6 Model Enhancements</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/whats-new/7-modelresults.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">7 Compare Model Results</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text"><span style="color: #3E6682;"><strong>Model Validation Report</strong></span></span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/validation/1-tripgen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1 Trip Generation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/validation/2-distribute.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2 Distribution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/validation/3-modechoice.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3 Mode Choice</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../v9x/v900/validation/4-assignhwy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4 Highway Assignment</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title"><strong>Section Contents</strong><br>__________________</h2>
   
  <ul class="collapse">
  <li><a href="#highway-network" id="toc-highway-network" class="nav-link active" data-scroll-target="#highway-network">Highway Network</a></li>
  <li><a href="#transit-networks" id="toc-transit-networks" class="nav-link" data-scroll-target="#transit-networks">Transit Networks</a></li>
  <li><a href="#segment-shapefile" id="toc-segment-shapefile" class="nav-link" data-scroll-target="#segment-shapefile">Segment Shapefile</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Highway &amp; Transit Networks Updates</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="highway-network" class="level2">
<h2 class="anchored" data-anchor-id="highway-network">Highway Network</h2>
<section id="highway-network-project-coding" class="level3">
<h3 class="anchored" data-anchor-id="highway-network-project-coding">Highway Network Project Coding</h3>
<p>The highway network in version 9 was updated to reflect the 2023-2050 RTP and the 2023-2028 TIP. The updated projects were coded into a set of fields in the Master highway network using the same field naming convention<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> as version 8, but field names were updated to reflect the new 2023 RTP:</p>
<p><strong>Attribute Type Identifying Prefix</strong></p>
<ul>
<li><em>Link</em>
<ul>
<li><strong>LN</strong> – lane</li>
<li><strong>FT</strong> – functional type</li>
<li><strong>TSPD</strong> – transit speed (coded on rail links and transit only links)</li>
<li><strong>HOT</strong> – marker on general purpose lane indicating presence of adjacent HOV/HOT lane</li>
<li><strong>REL</strong> – marker to identify reliability lane project (e.g.&nbsp;managed lanes on arterials or reversible freeway lanes, etc.)</li>
<li><strong>OP</strong> – marker to identify operational project (i.e.&nbsp;enhancements to improve the operations of a roadway without adding physical capacity, such as signal timing optimization, access management, ramp metering etc.)</li>
<li><strong>GIS</strong> – contains ID or key to link to GIS mapping and project information (currently only includes the ‘23_32’, ‘23_42’, and ‘23_50’ scenarios)</li>
</ul></li>
<li><em>Node</em>
<ul>
<li><strong>PNR</strong> – park-and-ride</li>
<li><strong>FARZN</strong> – commuter rail fare zone</li>
</ul></li>
</ul>
<p><strong>Scenario Identifying Suffix</strong></p>
<ul>
<li>_2015</li>
<li>_2019 – model base year</li>
<li>_2023 – RTP opening year</li>
<li>_2028 – end of 2023-2028 TIP</li>
<li>23_32 – 2023 RTP end-of-phase 1 (2032), fiscally-constrained</li>
<li>23_42 – 2023 RTP end-of-phase 2 (2042), fiscally-constrained</li>
<li>23_50 – 2023 RTP end-of-phase 3 (2050), fiscally-constrained</li>
<li>23_32UF – 2023 RTP end-of-phase 1 (2032), unfunded need</li>
<li>23_42UF – 2023 RTP end-of-phase 2 (2042), unfunded need</li>
<li>23_50UF – 2023 RTP end-of-phase 3 (2050), unfunded need</li>
<li>23_50UFM - 2023 RTP end-of-phase 3 (2050), unfunded need MAG alternate (includes different assumption related to Lehi freeway project at the Point of the Mountain), currently only includes “LN” attribute</li>
<li>Note, TSPD unfunded need scenario fields use “U” instead of “UF” due to the 10-character field width limitation.</li>
</ul>
<p>Changes to the number of lanes in version 9 can be seen in <a href="#fig-phase1">Figure&nbsp;1</a>, <a href="#fig-phase2">Figure&nbsp;2</a>, and <a href="#fig-phase3">Figure&nbsp;3</a>.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Phase 1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Phase 2</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Phase 3</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div id="fig-phase1" class="quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="data\map_pngs\comparisons/white-box.png" class="img-fluid figure-img"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="data\map_pngs\comparisons/RTP_2032_2030_Lane_MAP.png" class="img-fluid figure-img"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="data\map_pngs\comparisons/LEGEND.png" class="img-fluid figure-img"></p>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Changes to Highway Project List (Phase 1)</figcaption><p></p>
</figure>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div id="fig-phase2" class="quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="data\map_pngs\comparisons/white-box.png" class="img-fluid figure-img"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="data\map_pngs\comparisons/RTP_2042_2040_Lane_MAP.png" class="img-fluid figure-img"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="data\map_pngs\comparisons/LEGEND.png" class="img-fluid figure-img"></p>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: Changes to Highway Project List (Phase 2)</figcaption><p></p>
</figure>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div id="fig-phase3" class="quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="data\map_pngs\comparisons/white-box.png" class="img-fluid figure-img"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="data\map_pngs\comparisons/RTP_2050_Lane_MAP.png" class="img-fluid figure-img"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="data\map_pngs\comparisons/LEGEND.png" class="img-fluid figure-img"></p>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;3: Changes to Highway Project List (Phase 3)</figcaption><p></p>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="other-changes-to-network-field-attributes" class="level3">
<h3 class="anchored" data-anchor-id="other-changes-to-network-field-attributes">Other Changes to Network Field Attributes</h3>
<p>In addition, the following edits were made to the highway network:</p>
<ul>
<li>The distance exception fields (DISTEXCEPT) were set to 0. DISTEXCEPT was used in previous model versions at external links to account for the distance from the external to the county boundary for air quality VMT calculations. Since version 9 model boundaries correspond to county boundaries, this field is no longer needed in the model.</li>
<li>The “TSP” fields were updated to reflect recent UTA light rail and commuter rail studies.</li>
<li>The MAG_LINK/MAG_NODE fields identify links and node in the MAG planning area and are used when snapping together changes to the WFRC and MAG master networks. Version 8 included WFRC_LINK/WFRC_NODE fields to identify links/nodes in the WFRC area. These WFRC fields were redundant and dropped from the master network since the MAG and WFRC areas are mutually exclusive.</li>
<li>The commuter rail Fare Zone for the Vineyard and Orem stations was updated to be the same fare zone, similar to the fare zone for the North Temple and Salt Lake Central stations. There is no additional fare cost for traveling between the new Vineyard and Orem stations.</li>
<li>SEGID on the highway links was updated and made consistent with the most recent segment shapefile. SEGID exception fields (SEGEX_RTP, SEGEX_NEED) were also created to account for links with future SEGIDs that differ with existing SEGIDs, primarily for the frontage road system in Salt Lake and Utah counties. These new fields are under development and values for these fields will be forthcoming.</li>
</ul>
</section>
<section id="changes-to-highway-network-geometry" class="level3">
<h3 class="anchored" data-anchor-id="changes-to-highway-network-geometry">Changes to Highway Network Geometry</h3>
<p>Version 9 highway network was expanded to incorporate the new model areas (see <a href="https://wfrc.org/wftdm-docs/v9x/v900/whats-new/12-taz.html#changes-to-taz-geometry-and-attributes">Changes to TAZ Geometry and Attributes</a>). The expansion to these mountainous areas meant the inclusion of many very curvy roadways. The curvature of these roadways is maintained by the link shapefile in the associated <code>1_Inputs\3_Highway\GIS</code> folder. Edits made to the link/node geometry in the highway network in these areas should be done with <em>True Shape</em> turned on in Cube Base in order to maintain the link/node association with the underlying shapefile. In addition, <em>True Shape</em> will be required when exporting the link shapefile or the shape geometry in the mountain areas will be lost.</p>
</section>
<section id="changes-to-highway-network-numbering" class="level3">
<h3 class="anchored" data-anchor-id="changes-to-highway-network-numbering">Changes to Highway Network Numbering</h3>
<p>The version 9 highway network node numbering scheme was updated, as shown in <a href="#tbl-master-nodes">Table&nbsp;1</a>.</p>
<div class="grid">
<div class="g-col-2">

</div>
<div class="g-col-8">
<div class="cell" data-execution_count="1">
<div class="cell-output cell-output-display" data-execution_count="1">
<div id="tbl-master-nodes" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;1: New Master Network Node Numbering</caption>
<colgroup>
<col style="width: 10%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 39%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">MPO</th>
<th style="text-align: left;">Transit Nodes</th>
<th style="text-align: left;">Highway Nodes</th>
<th style="text-align: left;">v9 Expansion Area Nodes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">WFRC</td>
<td style="text-align: left;">10,000-19,999</td>
<td style="text-align: left;">20,000-49,999</td>
<td style="text-align: left;">90,000-94,999</td>
</tr>
<tr class="even">
<td style="text-align: left;">MAG</td>
<td style="text-align: left;">50,000-59,999</td>
<td style="text-align: left;">60,000-89,999</td>
<td style="text-align: left;">95,000-99,999</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<p>The “HwyNodes” parameter in the <code>0_GeneralParameters.block</code> file was updated to reflect the new highway node numbering.</p>
<div class="grid">
<div class="g-col-3">

</div>
<div class="g-col-6">
<div class="cell" data-execution_count="2">
<div class="cell-output cell-output-display" data-execution_count="2">
<div id="tbl-highway-renumber" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;2: Renumbered Master Network Highway Node Range</caption>
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">v9Value</th>
<th style="text-align: left;">v8Value</th>
<th style="text-align: left;">Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">HwyNodes</td>
<td style="text-align: left;">10000-99999</td>
<td style="text-align: left;">3401-999999</td>
<td style="text-align: left;">Highway and transit node range</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<p>Highway node references in the <code>PT_Parameter \...FAC</code> files and the <code>3_TurnPenalty.s</code> script were updated to reflect the new TAZ and highway node numbering. Array indices found in the <code>5_AssignHwy\05_RemoveManagedLanes.s</code> script were also updated from &lt;=20,000 to 1,000,000 to account for the new highway network numbering scheme.</p>
</section>
<section id="changes-to-external-location-and-numbering" class="level3">
<h3 class="anchored" data-anchor-id="changes-to-external-location-and-numbering">Changes to External Location and Numbering</h3>
<p>Details on the location and numbering of the new external nodes on the master highway network are shown in <a href="#fig-externals">Figure&nbsp;4</a> and <a href="#tbl-externals">Table&nbsp;3</a>. (See <a href="https://wfrc.org/wftdm-docs/v9x/v900/whats-new/12-taz.html#changes-to-taz-geometry-and-attributes">Changes to TAZ Geometry and Attributes</a> and <a href="https://wfrc.org/wftdm-docs/v9x/v900/whats-new/12-taz.html#changes-to-taz-parameters">Changes to TAZ Parameters</a> for more information on external zones.)</p>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="224" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 223;"><span id="cb1-224"><a href="#cb1-224" aria-hidden="true" tabindex="-1"></a>geojsonExternalOld   <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/externalold.geojson"</span>  )<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb1-225"><a href="#cb1-225" aria-hidden="true" tabindex="-1"></a>geojsonExternalNew   <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/externalnew.geojson"</span>  )<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb1-226"><a href="#cb1-226" aria-hidden="true" tabindex="-1"></a>geojsonMasterNetLink <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data/masternetlink.geojson"</span>)<span class="op">.</span><span class="fu">json</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-3" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="232" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 231;"><span id="cb2-232"><a href="#cb2-232" aria-hidden="true" tabindex="-1"></a>mapExternals <span class="op">=</span> {</span>
<span id="cb2-233"><a href="#cb2-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-234"><a href="#cb2-234" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> container <span class="op">=</span> DOM<span class="op">.</span><span class="fu">element</span>(<span class="st">'div'</span><span class="op">,</span> { <span class="dt">style</span><span class="op">:</span> <span class="vs">`width:</span><span class="sc">${</span>width<span class="sc">}</span><span class="vs">px;height:</span><span class="sc">${</span>width<span class="op">/</span><span class="fl">1.6</span><span class="sc">}</span><span class="vs">px`</span> })<span class="op">;</span></span>
<span id="cb2-235"><a href="#cb2-235" aria-hidden="true" tabindex="-1"></a>  <span class="kw">yield</span> container<span class="op">;</span></span>
<span id="cb2-236"><a href="#cb2-236" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-237"><a href="#cb2-237" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> map <span class="op">=</span> L<span class="op">.</span><span class="fu">map</span>(container)<span class="op">.</span><span class="fu">setView</span>([<span class="fl">40.7608</span><span class="op">,</span> <span class="op">-</span><span class="fl">111.8910</span>]<span class="op">,</span> <span class="fl">8.25</span>)<span class="op">;</span></span>
<span id="cb2-238"><a href="#cb2-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-239"><a href="#cb2-239" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> osmLayer <span class="op">=</span> L<span class="op">.</span><span class="fu">tileLayer</span>(<span class="st">'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'</span><span class="op">,</span> {</span>
<span id="cb2-240"><a href="#cb2-240" aria-hidden="true" tabindex="-1"></a>      <span class="dt">attribution</span><span class="op">:</span> <span class="st">'&amp;copy; &lt;a href="https://www.openstreetmap.org/copyright"&gt;OpenStreetMap&lt;/a&gt; contributors'</span></span>
<span id="cb2-241"><a href="#cb2-241" aria-hidden="true" tabindex="-1"></a>  })<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span> </span>
<span id="cb2-242"><a href="#cb2-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-243"><a href="#cb2-243" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> cNew <span class="op">=</span> <span class="st">"#FF0000"</span><span class="op">;</span></span>
<span id="cb2-244"><a href="#cb2-244" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> cOld <span class="op">=</span> <span class="st">"#00FF00"</span><span class="op">;</span></span>
<span id="cb2-245"><a href="#cb2-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-246"><a href="#cb2-246" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> squareIcon_New <span class="op">=</span> L<span class="op">.</span><span class="fu">icon</span>({</span>
<span id="cb2-247"><a href="#cb2-247" aria-hidden="true" tabindex="-1"></a>    <span class="dt">iconUrl</span><span class="op">:</span> <span class="st">'https://wfrc.org/wftdm-docs/_pictures/square_green.png'</span><span class="op">,</span>  <span class="co">// Replace with the path to your square-like icon image</span></span>
<span id="cb2-248"><a href="#cb2-248" aria-hidden="true" tabindex="-1"></a>    <span class="dt">iconSize</span><span class="op">:</span> [<span class="dv">15</span><span class="op">,</span> <span class="dv">15</span>]<span class="op">,</span>          <span class="co">// Adjust the size of the square-like icon</span></span>
<span id="cb2-249"><a href="#cb2-249" aria-hidden="true" tabindex="-1"></a>    <span class="dt">iconAnchor</span><span class="op">:</span> [<span class="dv">5</span><span class="op">,</span> <span class="dv">5</span>]<span class="op">,</span>          <span class="co">// Adjust the anchor point if needed</span></span>
<span id="cb2-250"><a href="#cb2-250" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb2-251"><a href="#cb2-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-252"><a href="#cb2-252" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> squareIcon_Old <span class="op">=</span> L<span class="op">.</span><span class="fu">icon</span>({</span>
<span id="cb2-253"><a href="#cb2-253" aria-hidden="true" tabindex="-1"></a>    <span class="dt">iconUrl</span><span class="op">:</span> <span class="st">'https://wfrc.org/wftdm-docs/_pictures/square_red.png'</span><span class="op">,</span>       <span class="co">// Replace with the path to your square-like icon image</span></span>
<span id="cb2-254"><a href="#cb2-254" aria-hidden="true" tabindex="-1"></a>    <span class="dt">iconSize</span><span class="op">:</span> [<span class="dv">15</span><span class="op">,</span> <span class="dv">15</span>]<span class="op">,</span>          <span class="co">// Adjust the size of the square-like icon</span></span>
<span id="cb2-255"><a href="#cb2-255" aria-hidden="true" tabindex="-1"></a>    <span class="dt">iconAnchor</span><span class="op">:</span> [<span class="dv">5</span><span class="op">,</span> <span class="dv">5</span>]<span class="op">,</span>          <span class="co">// Adjust the anchor point if needed</span></span>
<span id="cb2-256"><a href="#cb2-256" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb2-257"><a href="#cb2-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-258"><a href="#cb2-258" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> cCommon <span class="op">=</span> <span class="st">"#FF0000"</span></span>
<span id="cb2-259"><a href="#cb2-259" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> cAdded  <span class="op">=</span> <span class="st">"#00FF00"</span></span>
<span id="cb2-260"><a href="#cb2-260" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> cOther  <span class="op">=</span> <span class="st">"#888888"</span></span>
<span id="cb2-261"><a href="#cb2-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-262"><a href="#cb2-262" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> geolineCommon <span class="op">=</span> {</span>
<span id="cb2-263"><a href="#cb2-263" aria-hidden="true" tabindex="-1"></a>      <span class="dt">color</span><span class="op">:</span> cCommon<span class="op">,</span></span>
<span id="cb2-264"><a href="#cb2-264" aria-hidden="true" tabindex="-1"></a>      <span class="dt">weight</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb2-265"><a href="#cb2-265" aria-hidden="true" tabindex="-1"></a>      <span class="dt">opacity</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb2-266"><a href="#cb2-266" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb2-267"><a href="#cb2-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-268"><a href="#cb2-268" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> geoLineAdded <span class="op">=</span> {</span>
<span id="cb2-269"><a href="#cb2-269" aria-hidden="true" tabindex="-1"></a>      <span class="dt">color</span><span class="op">:</span> cAdded<span class="op">,</span></span>
<span id="cb2-270"><a href="#cb2-270" aria-hidden="true" tabindex="-1"></a>      <span class="dt">weight</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb2-271"><a href="#cb2-271" aria-hidden="true" tabindex="-1"></a>      <span class="dt">opacity</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb2-272"><a href="#cb2-272" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb2-273"><a href="#cb2-273" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> geoLineOther <span class="op">=</span> {</span>
<span id="cb2-274"><a href="#cb2-274" aria-hidden="true" tabindex="-1"></a>      <span class="dt">color</span><span class="op">:</span> cOther<span class="op">,</span></span>
<span id="cb2-275"><a href="#cb2-275" aria-hidden="true" tabindex="-1"></a>      <span class="dt">weight</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb2-276"><a href="#cb2-276" aria-hidden="true" tabindex="-1"></a>      <span class="dt">opacity</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb2-277"><a href="#cb2-277" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb2-278"><a href="#cb2-278" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb2-279"><a href="#cb2-279" aria-hidden="true" tabindex="-1"></a>  <span class="co">// function to use different icons based on number of stations</span></span>
<span id="cb2-280"><a href="#cb2-280" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">markerByNewNet</span>(feature) {</span>
<span id="cb2-281"><a href="#cb2-281" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">FLG_NEWNET</span><span class="op">==</span><span class="dv">3</span>) {</span>
<span id="cb2-282"><a href="#cb2-282" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> geolineCommon<span class="op">;</span></span>
<span id="cb2-283"><a href="#cb2-283" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">FLG_NEWNET</span><span class="op">==</span><span class="dv">23</span>){</span>
<span id="cb2-284"><a href="#cb2-284" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> geoLineAdded<span class="op">;</span></span>
<span id="cb2-285"><a href="#cb2-285" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span>{</span>
<span id="cb2-286"><a href="#cb2-286" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> geoLineOther<span class="op">;</span></span>
<span id="cb2-287"><a href="#cb2-287" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-288"><a href="#cb2-288" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb2-289"><a href="#cb2-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-290"><a href="#cb2-290" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">getColor</span>(c) {</span>
<span id="cb2-291"><a href="#cb2-291" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>        (c<span class="op">==</span><span class="st">'Common'</span>) {</span>
<span id="cb2-292"><a href="#cb2-292" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> cCommon<span class="op">;</span></span>
<span id="cb2-293"><a href="#cb2-293" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (c<span class="op">==</span><span class="st">'Added'</span>) {</span>
<span id="cb2-294"><a href="#cb2-294" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> cAdded<span class="op">;</span></span>
<span id="cb2-295"><a href="#cb2-295" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (c<span class="op">==</span><span class="st">'Other'</span>) {</span>
<span id="cb2-296"><a href="#cb2-296" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> cOther<span class="op">;</span></span>
<span id="cb2-297"><a href="#cb2-297" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-298"><a href="#cb2-298" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb2-299"><a href="#cb2-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-300"><a href="#cb2-300" aria-hidden="true" tabindex="-1"></a>  <span class="co">//let lyrNetwork = L.geoJson(geojsonMasterNetLink, { weight: 0.75, color: "#888888", fillOpacity: 0}).addTo(map);</span></span>
<span id="cb2-301"><a href="#cb2-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-302"><a href="#cb2-302" aria-hidden="true" tabindex="-1"></a>  <span class="co">// create the GeoJSON layer and call the styling function with each marker</span></span>
<span id="cb2-303"><a href="#cb2-303" aria-hidden="true" tabindex="-1"></a><span class="co">//  var lyrNetwork = L.geoJson(geojsonMasterNetLink,  { function (markerByNewNet(feature))}).addTo(map);</span></span>
<span id="cb2-304"><a href="#cb2-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-305"><a href="#cb2-305" aria-hidden="true" tabindex="-1"></a>  <span class="co">// create the GeoJSON layer and call the styling function with each marker</span></span>
<span id="cb2-306"><a href="#cb2-306" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> externalNewLayer <span class="op">=</span> L<span class="op">.</span><span class="fu">geoJSON</span>(geojsonExternalNew<span class="op">,</span> {</span>
<span id="cb2-307"><a href="#cb2-307" aria-hidden="true" tabindex="-1"></a>    <span class="dt">pointToLayer</span><span class="op">:</span> <span class="kw">function</span> (feature<span class="op">,</span> latlng) {</span>
<span id="cb2-308"><a href="#cb2-308" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> mypopup <span class="op">=</span> L<span class="op">.</span><span class="fu">popup</span>()<span class="op">.</span><span class="fu">setContent</span>(<span class="st">"&lt;b&gt;Node: "</span> <span class="op">+</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">N</span> <span class="op">+</span> <span class="st">"&lt;/b&gt;"</span>)<span class="op">;</span></span>
<span id="cb2-309"><a href="#cb2-309" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> mymarker <span class="op">=</span> L<span class="op">.</span><span class="fu">marker</span>(latlng<span class="op">,</span> { <span class="dt">icon</span><span class="op">:</span> squareIcon_New })<span class="op">;</span></span>
<span id="cb2-310"><a href="#cb2-310" aria-hidden="true" tabindex="-1"></a>      mymarker<span class="op">.</span><span class="fu">bindPopup</span>(mypopup)<span class="op">;</span></span>
<span id="cb2-311"><a href="#cb2-311" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> mymarker<span class="op">;</span></span>
<span id="cb2-312"><a href="#cb2-312" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-313"><a href="#cb2-313" aria-hidden="true" tabindex="-1"></a>  })<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb2-314"><a href="#cb2-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-315"><a href="#cb2-315" aria-hidden="true" tabindex="-1"></a>  <span class="co">// create the GeoJSON layer and call the styling function with each marker</span></span>
<span id="cb2-316"><a href="#cb2-316" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> externalOldLayer <span class="op">=</span> L<span class="op">.</span><span class="fu">geoJSON</span>(geojsonExternalOld<span class="op">,</span> {</span>
<span id="cb2-317"><a href="#cb2-317" aria-hidden="true" tabindex="-1"></a>    <span class="dt">pointToLayer</span><span class="op">:</span> <span class="kw">function</span> (feature<span class="op">,</span> latlng) {</span>
<span id="cb2-318"><a href="#cb2-318" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> mypopup <span class="op">=</span> L<span class="op">.</span><span class="fu">popup</span>()<span class="op">.</span><span class="fu">setContent</span>(<span class="st">"&lt;b&gt;Node: "</span> <span class="op">+</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">N</span> <span class="op">+</span> <span class="st">"&lt;/b&gt;"</span>)<span class="op">;</span></span>
<span id="cb2-319"><a href="#cb2-319" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> mymarker <span class="op">=</span> L<span class="op">.</span><span class="fu">marker</span>(latlng<span class="op">,</span> { <span class="dt">icon</span><span class="op">:</span> squareIcon_Old })<span class="op">;</span></span>
<span id="cb2-320"><a href="#cb2-320" aria-hidden="true" tabindex="-1"></a>      mymarker<span class="op">.</span><span class="fu">bindPopup</span>(mypopup)<span class="op">;</span></span>
<span id="cb2-321"><a href="#cb2-321" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> mymarker<span class="op">;</span></span>
<span id="cb2-322"><a href="#cb2-322" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-323"><a href="#cb2-323" aria-hidden="true" tabindex="-1"></a>  })<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb2-324"><a href="#cb2-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-325"><a href="#cb2-325" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> legend <span class="op">=</span> L<span class="op">.</span><span class="fu">control</span>({<span class="dt">position</span><span class="op">:</span> <span class="st">'bottomleft'</span>})<span class="op">;</span></span>
<span id="cb2-326"><a href="#cb2-326" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">.</span><span class="at">onAdd</span> <span class="op">=</span> <span class="kw">function</span> (map) {</span>
<span id="cb2-327"><a href="#cb2-327" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> div <span class="op">=</span> L<span class="op">.</span><span class="at">DomUtil</span><span class="op">.</span><span class="fu">create</span>(<span class="st">'div'</span><span class="op">,</span> <span class="st">'info legend'</span>)<span class="op">;</span></span>
<span id="cb2-328"><a href="#cb2-328" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> labelsBill <span class="op">=</span> []<span class="op">;</span> <span class="co">// legend title</span></span>
<span id="cb2-329"><a href="#cb2-329" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> lcategories <span class="op">=</span> [<span class="st">'v8.3.2'</span><span class="op">,</span><span class="st">'v9.0.0'</span>]<span class="op">;</span></span>
<span id="cb2-330"><a href="#cb2-330" aria-hidden="true" tabindex="-1"></a>      <span class="kw">var</span> lcolors     <span class="op">=</span> [cOld    <span class="op">,</span>cNew    ]<span class="op">;</span></span>
<span id="cb2-331"><a href="#cb2-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-332"><a href="#cb2-332" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> lcategories<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb2-333"><a href="#cb2-333" aria-hidden="true" tabindex="-1"></a>        div<span class="op">.</span><span class="at">innerHTML</span> <span class="op">+=</span> </span>
<span id="cb2-334"><a href="#cb2-334" aria-hidden="true" tabindex="-1"></a>          labelsBill<span class="op">.</span><span class="fu">push</span>(</span>
<span id="cb2-335"><a href="#cb2-335" aria-hidden="true" tabindex="-1"></a>            <span class="st">'&lt;i style="background:'</span> <span class="op">+</span> lcolors[i] <span class="op">+</span> <span class="st">'"&gt;&amp;nbsp;&lt;/i&gt; '</span> <span class="op">+</span></span>
<span id="cb2-336"><a href="#cb2-336" aria-hidden="true" tabindex="-1"></a>          (lcategories[i] <span class="op">?</span> lcategories[i] <span class="op">:</span> <span class="st">'+'</span>))<span class="op">;</span></span>
<span id="cb2-337"><a href="#cb2-337" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-338"><a href="#cb2-338" aria-hidden="true" tabindex="-1"></a>      div<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> labelsBill<span class="op">.</span><span class="fu">join</span>(<span class="st">'&lt;br&gt;'</span>)<span class="op">;</span></span>
<span id="cb2-339"><a href="#cb2-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-340"><a href="#cb2-340" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Add CSS style for the background color</span></span>
<span id="cb2-341"><a href="#cb2-341" aria-hidden="true" tabindex="-1"></a>      div<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">backgroundColor</span> <span class="op">=</span> <span class="st">'lightgray'</span><span class="op">;</span></span>
<span id="cb2-342"><a href="#cb2-342" aria-hidden="true" tabindex="-1"></a>      div<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">padding</span> <span class="op">=</span> <span class="st">'10px'</span><span class="op">;</span></span>
<span id="cb2-343"><a href="#cb2-343" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb2-344"><a href="#cb2-344" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> div<span class="op">;</span></span>
<span id="cb2-345"><a href="#cb2-345" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb2-346"><a href="#cb2-346" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span>  </span>
<span id="cb2-347"><a href="#cb2-347" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-externals" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-2" data-nodetype="declaration">

</div>
<figcaption class="figure-caption">Figure&nbsp;4: Location of External Nodes</figcaption>
</figure>
</div>
</div>
<div class="grid">
<div class="g-col-2">

</div>
<div class="g-col-8">
<div class="cell" data-execution_count="7">
<div class="cell-output cell-output-display" data-execution_count="7">
<div id="tbl-externals" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;3: External Number &amp; Description</caption>
<colgroup>
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 40%">
<col style="width: 30%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">County</th>
<th style="text-align: left;">v9 Value</th>
<th style="text-align: left;">v8 Value</th>
<th style="text-align: left;">Location</th>
<th style="text-align: left;">Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Box Elder</td>
<td style="text-align: left;">3601</td>
<td style="text-align: left;">136</td>
<td style="text-align: left;">FAR-1082 Bird Refuge</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3602</td>
<td style="text-align: left;">137</td>
<td style="text-align: left;">SR-13/83 to Corinne</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3603</td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">FAR-1112 to Bear River</td>
<td style="text-align: left;">New External</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3604</td>
<td style="text-align: left;">138</td>
<td style="text-align: left;">I-15 to Tremonton</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3605</td>
<td style="text-align: left;">139</td>
<td style="text-align: left;">SR-38 to Riverside</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3606</td>
<td style="text-align: left;">140</td>
<td style="text-align: left;">SR-91 to Logan</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Weber</td>
<td style="text-align: left;">3607</td>
<td style="text-align: left;">421</td>
<td style="text-align: left;">FAR-3462 N Ogden Pass</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3608</td>
<td style="text-align: left;">422</td>
<td style="text-align: left;">SR-39 Ogden Canyon</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3609</td>
<td style="text-align: left;">423</td>
<td style="text-align: left;">I-84 to Summit</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="even">
<td style="text-align: left;">Salt Lake</td>
<td style="text-align: left;">3610</td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">FAR-2688 Butterfield Cyn to Tooele</td>
<td style="text-align: left;">New External</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3611</td>
<td style="text-align: left;">1783</td>
<td style="text-align: left;">SR-201 to Tooele</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3612</td>
<td style="text-align: left;">1782</td>
<td style="text-align: left;">I-80 to Tooele</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3613</td>
<td style="text-align: left;">1784</td>
<td style="text-align: left;">SR-65 Mountain Dell Canyon</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3614</td>
<td style="text-align: left;">1785</td>
<td style="text-align: left;">I-80 East Parley’s</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">1786</td>
<td style="text-align: left;">FAR-2193 Millcreek Canyon</td>
<td style="text-align: left;">Removed for Area Expansion</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3615</td>
<td style="text-align: left;">1787</td>
<td style="text-align: left;">SR-190 Guardsman Pass</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">1788</td>
<td style="text-align: left;">SR-210 Little Cottonwood</td>
<td style="text-align: left;">Removed for Area Expansion</td>
</tr>
<tr class="even">
<td style="text-align: left;">Utah</td>
<td style="text-align: left;">3616</td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">FAR-1828 Goshen Canyon</td>
<td style="text-align: left;">New External</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3617</td>
<td style="text-align: left;">2880</td>
<td style="text-align: left;">US-6 Eureka</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3618</td>
<td style="text-align: left;">2881</td>
<td style="text-align: left;">SR-73 Rush Valley</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3619</td>
<td style="text-align: left;">2874</td>
<td style="text-align: left;">FAR-3108 Cascade Spring</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3620</td>
<td style="text-align: left;">2875</td>
<td style="text-align: left;">SR-189 Provo Canyon</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3621</td>
<td style="text-align: left;">2876</td>
<td style="text-align: left;">FAR-2865 Sixth Water / Horse Creek</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3622</td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">FAR-2863 Sheep Creek</td>
<td style="text-align: left;">New External</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3623</td>
<td style="text-align: left;">2877</td>
<td style="text-align: left;">US-6 Price Canyon</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3624</td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">SR-96 Scofield</td>
<td style="text-align: left;">New External</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3625</td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">FAR-2495 Skyline Dr</td>
<td style="text-align: left;">New External</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3626</td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">US-89 Thistle</td>
<td style="text-align: left;">New External</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3627</td>
<td style="text-align: left;">2878</td>
<td style="text-align: left;">FAR-1822 N Nebo Loop</td>
<td style="text-align: left;">Moved for Area Expansion</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">3628</td>
<td style="text-align: left;">2879</td>
<td style="text-align: left;">I-15 to Juab</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">3629</td>
<td style="text-align: left;">nan</td>
<td style="text-align: left;">FAR-1826 South Ridge Farms</td>
<td style="text-align: left;">New External</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="additional-network-changes" class="level3">
<h3 class="anchored" data-anchor-id="additional-network-changes">Additional Network Changes</h3>
<p>Additional highway network updates in version 9 include:</p>
<ul>
<li>A fix for a small network error in Box Elder where a local road was drawn to the centroid of a TAZ</li>
<li>A phase change for Managed Motorways in WFRC area</li>
<li>Significant updates to centroid connectors in the MAG area</li>
</ul>
</section>
</section>
<section id="transit-networks" class="level2">
<h2 class="anchored" data-anchor-id="transit-networks">Transit Networks</h2>
<section id="changes-to-transit-line-files" class="level3">
<h3 class="anchored" data-anchor-id="changes-to-transit-line-files">Changes to Transit Line Files</h3>
<p>The transit line files were updated to correspond with the 2023-2050 RTP and the 2023-2028 TIP. Specific changes to these files for each plan year include:</p>
<ul>
<li><strong>Lin_2019</strong> – files were thoroughly vetted to represent Aug 2019 change day.</li>
<li><strong>Lin_2023</strong> – route alignment, headways and stops were updated to the August 2022 change day.</li>
<li><strong>Lin_2028</strong> – route alignment, headways and stops were updated to the UTA 5-Year Service Plan.</li>
<li><strong>Lin_2032</strong>, Lin_2042, Lin_2050 – changes from 2028 were rolled forward into plan phased years and updated based on 2023 fiscally constrained plan.</li>
<li><strong>Lin_2032_Needs</strong>, <strong>Lin_2042_Needs</strong>, <strong>Lin_2050_Needs</strong> – changes from 2028 were rolled forward into plan phased years and updated based on 2023 unfunded needs plan.</li>
<li><strong>Lin_2032_Needs_MAG</strong>, <strong>Lin_2042_Needs_MAG</strong>, <strong>Lin_2050_Needs_MAG</strong> – these are copies of the “Needs” transit plans and edited to reflect changes in the MAG 2023 unfunded needs plan at the Point of the Mountain.</li>
</ul>
<p>In addition, route <em>S902</em> in Salt Lake County was shortened to exclude the I-80 Parleys Canyon external node and route <em>LittleCott</em> which provides access up Little Cottonwood Canyon was added to the model.</p>
</section>
<section id="changes-to-general-hand-coded-support-links" class="level3">
<h3 class="anchored" data-anchor-id="changes-to-general-hand-coded-support-links">Changes to General Hand-Coded Support Links</h3>
<p>The <code>1_Inputs\4_Transit\General_hand_coded_walk_links.NTL</code> file was updated to be consistent with the new TAZ structure and to ensure all hand coded walk links are realistic.</p>
</section>
<section id="added-transit-route-tester-folder" class="level3">
<h3 class="anchored" data-anchor-id="added-transit-route-tester-folder">Added <code>Transit Route Tester</code> Folder</h3>
<p>A <code>_chk Transit Compile on Net</code> folder was added in the <code>1_Inputs\4_Transit</code> folder. This folder contains a script to check if the transit line files compile on the related scenario highway network from the Master network. The script helps review transit line edits outside of the model stream. Any transit line compiling issues are reported in the <code>check - 1 – {ScenarioName}.txt</code> text file created by the script.</p>
</section>
</section>
<section id="segment-shapefile" class="level2">
<h2 class="anchored" data-anchor-id="segment-shapefile">Segment Shapefile</h2>
<p>The Wasatch Front segment shapefile (found in <code>1_Inputs\6_Segment</code>) was updated to reflect the updated highway and transit networks. These changes include:</p>
<ul>
<li>Segments were adjusted to reflect new highway projects coded on the master highway network.</li>
<li>SEGIDs were added to rail links to allow for easier transit result visualization.</li>
</ul>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Field names are composed of a prefix and a suffix. The prefix indicates the type of the network attribute (e.g.&nbsp;lane, functional type, etc.). The suffix identifies the scenarios coded into the network. If the scenario is part of a plan phase year, a 2-digit plan-opening-year is included in the suffix name. All field names are limited to 10 characters in length.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"geojsonExternalOld   = FileAttachment(\"data/externalold.geojson\"  ).json()\ngeojsonExternalNew   = FileAttachment(\"data/externalnew.geojson\"  ).json()\ngeojsonMasterNetLink = FileAttachment(\"data/masternetlink.geojson\").json()\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"\nmapExternals = {\n\n  let container = DOM.element('div', { style: `width:${width}px;height:${width/1.6}px` });\n  yield container;\n  \n  let map = L.map(container).setView([40.7608, -111.8910], 8.25);\n\n  let osmLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n  }).addTo(map); \n\n  var cNew = \"#FF0000\";\n  var cOld = \"#00FF00\";\n\n  var squareIcon_New = L.icon({\n    iconUrl: 'https://wfrc.org/wftdm-docs/_pictures/square_green.png',  // Replace with the path to your square-like icon image\n    iconSize: [15, 15],          // Adjust the size of the square-like icon\n    iconAnchor: [5, 5],          // Adjust the anchor point if needed\n  });\n\n  var squareIcon_Old = L.icon({\n    iconUrl: 'https://wfrc.org/wftdm-docs/_pictures/square_red.png',       // Replace with the path to your square-like icon image\n    iconSize: [15, 15],          // Adjust the size of the square-like icon\n    iconAnchor: [5, 5],          // Adjust the anchor point if needed\n  });\n\n  var cCommon = \"#FF0000\"\n  var cAdded  = \"#00FF00\"\n  var cOther  = \"#888888\"\n\n  var geolineCommon = {\n      color: cCommon,\n      weight: 2,\n      opacity: 1,\n  };\n\n  var geoLineAdded = {\n      color: cAdded,\n      weight: 2,\n      opacity: 1,\n  };\n  var geoLineOther = {\n      color: cOther,\n      weight: 2,\n      opacity: 1,\n  };\n            \n  // function to use different icons based on number of stations\n  function markerByNewNet(feature) {\n    if (feature.properties.FLG_NEWNET==3) {\n      return geolineCommon;\n    } else if (feature.properties.FLG_NEWNET==23){\n      return geoLineAdded;\n    } else{\n      return geoLineOther;\n    }\n  };\n\n  function getColor(c) {\n    if        (c=='Common') {\n      return cCommon;\n    } else if (c=='Added') {\n      return cAdded;\n    } else if (c=='Other') {\n      return cOther;\n    }\n  };\n\n  //let lyrNetwork = L.geoJson(geojsonMasterNetLink, { weight: 0.75, color: \"#888888\", fillOpacity: 0}).addTo(map);\n\n  // create the GeoJSON layer and call the styling function with each marker\n//  var lyrNetwork = L.geoJson(geojsonMasterNetLink,  { function (markerByNewNet(feature))}).addTo(map);\n\n  // create the GeoJSON layer and call the styling function with each marker\n  var externalNewLayer = L.geoJSON(geojsonExternalNew, {\n    pointToLayer: function (feature, latlng) {\n      var mypopup = L.popup().setContent(\"<b>Node: \" + feature.properties.N + \"</b>\");\n      var mymarker = L.marker(latlng, { icon: squareIcon_New });\n      mymarker.bindPopup(mypopup);\n      return mymarker;\n    }\n  }).addTo(map);\n\n  // create the GeoJSON layer and call the styling function with each marker\n  var externalOldLayer = L.geoJSON(geojsonExternalOld, {\n    pointToLayer: function (feature, latlng) {\n      var mypopup = L.popup().setContent(\"<b>Node: \" + feature.properties.N + \"</b>\");\n      var mymarker = L.marker(latlng, { icon: squareIcon_Old });\n      mymarker.bindPopup(mypopup);\n      return mymarker;\n    }\n  }).addTo(map);\n\n  var legend = L.control({position: 'bottomleft'});\n    legend.onAdd = function (map) {\n      var div = L.DomUtil.create('div', 'info legend');\n      var labelsBill = []; // legend title\n      var lcategories = ['v8.3.2','v9.0.0'];\n      var lcolors     = [cOld    ,cNew    ];\n\n      for (var i = 0; i < lcategories.length; i++) {\n        div.innerHTML += \n          labelsBill.push(\n            '<i style=\"background:' + lcolors[i] + '\">&nbsp;</i> ' +\n          (lcategories[i] ? lcategories[i] : '+'));\n      }\n      div.innerHTML = labelsBill.join('<br>');\n\n      // Add CSS style for the background color\n      div.style.backgroundColor = 'lightgray';\n      div.style.padding = '10px';\n      \n      return div;\n    };\n    legend.addTo(map);  \n}\n"}]}
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../v9x/v900/whats-new";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left"><a href="https://wfrc.org"><img src="https://wfrc.org/wp-content/uploads/2021/11/logo.jpg" class="img-fluid" alt="WFRC" width="150"></a> <a href="https://mountainland.org/"><img src="https://mountainland.org/static/media/logo/svg/MAG_Logo_Horz_NoTag.svg" class="img-fluid" alt="MAG" width="65"></a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Built using <a href="https://quarto.org">Quarto</a></div>
  </div>
</footer>



</body></html>