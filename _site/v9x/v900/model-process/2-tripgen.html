<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>WFTDM Documentation - Trip Generation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../_pictures/favicon.ico" rel="icon">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="https://wfrc.org" class="navbar-brand navbar-brand-logo">
    <img src="../../../_pictures/wf-logo-new-white-t.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html" rel="" target="">
 <span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-version-9-series" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Version 9 Series</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-version-9-series">    
        <li>
    <a class="dropdown-item" href="../../../v9x/v910/index.html" rel="" target="">
 <span class="dropdown-text">Version 9.1.0</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../v9x/v902/index.html" rel="" target="">
 <span class="dropdown-text">Version 9.0.2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../v9x/v901/index.html" rel="" target="">
 <span class="dropdown-text">Version 9.0.1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../v9x/v900/index.html" rel="" target="">
 <span class="dropdown-text">Version 9.0.0</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-past-versions" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Past Versions</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-past-versions">    
        <li>
    <a class="dropdown-item" href="../../../v8x/v832/index.html" rel="" target="">
 <span class="dropdown-text">Version 8.3.2 - Draft Release</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../v8x/v831/index.html" rel="" target="">
 <span class="dropdown-text">Version 8.3.1 - Draft Release</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../v8x/v830/index.html" rel="" target="">
 <span class="dropdown-text">Version 8.3.0 - Draft Release</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
    <a href="https://github.com/WFRCAnalytics/TDM-Documentation/tree/gh-pages" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
    <a href="mailto:sswim@wfrc.org" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-envelope"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title"><strong>Section Contents</strong><br>__________________</h2>
   
  <ul class="collapse">
  <li><a href="#estimate-productions" id="toc-estimate-productions" class="nav-link active" data-scroll-target="#estimate-productions">Estimate Productions</a></li>
  <li><a href="#estimate-attractions" id="toc-estimate-attractions" class="nav-link" data-scroll-target="#estimate-attractions">Estimate Attractions</a></li>
  <li><a href="#balance-productions-and-attractions" id="toc-balance-productions-and-attractions" class="nav-link" data-scroll-target="#balance-productions-and-attractions">Balance Productions and Attractions</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Trip Generation</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>A trip is defined as the movement of a person between two locations for a given purpose. Each trip has two trip ends. Each trip end is associated within a TAZ. Trips are comprised of a both a production zone and an attraction zone. The production zone is where the trip was produced, typically a household for a home-based trip or a place of employment for a non-home-based trip. The attraction zone is the location that is attracting a trip, typically a place of employment or commercial activity. Productions and attractions are travel direction agnostic, meaning that a to-work trip and from-work trip would show as two productions in the home location TAZ and as two attractions in the work location TAZ.</p>
<p>The Trip Generation script calculates productions and attractions at the TAZ level. The trip ends are not paired in this step but remain distinctly separated, which is then used as input into the Trip Distribution model that pairs trip ends together. The script calculates productions and attractions per zone using trip generation rates and adjustments. All values produced by this script represent person trips, not vehicle trips. The trip generation rates are calculated from the household travel survey.</p>
<p>Rates are applied to individual TAZs based on the attributes of the TAZ as taken from the household disaggregation model, additional socioeconomic data, externals data, and special generator data (Temple Square, SLC Main Library, colleges, etc.). All rates in this script are expressed in terms of daily rates. Rates are averages and are only applicable at aggregate levels.</p>
<p>The goal of the script is to generate a set of productions and attractions for each TAZ for the following base trip purposes:</p>
<ul>
<li>Home-Based Work (HBW)</li>
<li>Home-Based School – Primary, Kindergarten to 6th Grade (HBSch_Pr)</li>
<li>Home-Based School – Secondary, 7th to 12th Grade (HBSch_Sc)</li>
<li>Home-Based Shopping (HBShp)</li>
<li>Home-Based Other (HBOth)</li>
<li>Non-Home-Based Work (NHBW)</li>
<li>Non-Home-Based Non-Work (NHBNW)</li>
</ul>
<p>Additionally, the script estimates trip generation for the following for external trips:</p>
<ul>
<li>Internal-to-External (IX) Productions</li>
<li>External-to-Internal (XI) Attractions</li>
</ul>
<p>Productions and attractions are also generated for short-haul trucks based on people movement, goods movement, and services for the following truck types:</p>
<ul>
<li>Light Trucks (LT)</li>
<li>Medium Trucks (MD)</li>
<li>Heavy-Trucks (HV)</li>
</ul>
<p>Given the various combinations of trip purposes and possible attributes, there are quite a few steps in the script. These steps can be grouped into the following three categories:</p>
<ol type="1">
<li>Estimate productions</li>
<li>Estimate attractions</li>
<li>Balance productions and attractions</li>
</ol>
<p>Following a discussion of these three groups, there is a presentation of the validation results.</p>
<section id="estimate-productions" class="level2">
<h2 class="anchored" data-anchor-id="estimate-productions">Estimate Productions</h2>
<p>Productions for each TAZ are estimated in the following steps:</p>
<ol type="1">
<li>Calculate base productions</li>
<li>Calculate internal-to-external productions and adjust base productions accordingly</li>
<li>Adjust non-home-based trips to account for visitors</li>
<li>Calculate productions for short haul truck trips</li>
</ol>
<section id="base-productions" class="level3">
<h3 class="anchored" data-anchor-id="base-productions">Base Productions</h3>
<p>Base productions are generated based on TAZ household attributes including number of workers, household size, and life cycle. Work trips only utilize attributes based on number of workers. The other trip purposes use household size and life cycle. The associated production rates are shown in <a href="#tbl-tp-prod">Table&nbsp;1</a>. As expected, the greater the number of workers or the larger the household size, the higher the rates for any given trip purpose. The highest trip rate is 10.703 for home-based other trips for households of size 6+ in life cycle 2.</p>
<p>The production rates are only estimated for combinations of TAZ variable and trip purpose that are valid. A household with no workers does not generate any work trips. Additionally, households in Life Cycle 1 would not generate any school trips by definition.</p>
<div class="grid">
<div class="g-col-1">

</div>
<div class="g-col-10">
<div class="cell" data-execution_count="1">
<div class="cell-output cell-output-display" data-execution_count="1">
<div id="tbl-tp-prod" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;1: Production Rates by Trip Purpose.</caption>
<colgroup>
<col style="width: 37%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 11%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">TAZ Variable</th>
<th style="text-align: left;">HBW</th>
<th style="text-align: left;">HBSch*</th>
<th style="text-align: left;">HBShp</th>
<th style="text-align: left;">HBOth</th>
<th style="text-align: left;">NHBW</th>
<th style="text-align: left;">NHBNW</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Households with 0 Workers</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="even">
<td style="text-align: left;">Households with 1 Worker</td>
<td style="text-align: left;">1.764</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.856</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Households with 2 Workers</td>
<td style="text-align: left;">3.073</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">1.361</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="even">
<td style="text-align: left;">Households with 3+ Workers</td>
<td style="text-align: left;">4.698</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">1.781</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Households of Size 1 in Life Cycle 1</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.443</td>
<td style="text-align: left;">1.313</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.632</td>
</tr>
<tr class="even">
<td style="text-align: left;">Households of Size 2 in Life Cycle 1</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.706</td>
<td style="text-align: left;">2.382</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">1.013</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Households of Size 3 in Life Cycle 1</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.757</td>
<td style="text-align: left;">3.657</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">1.542</td>
</tr>
<tr class="even">
<td style="text-align: left;">Households of Size 4 in Life Cycle 1</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">1.088</td>
<td style="text-align: left;">5.128</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">1.820</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Households of Size 5 in Life Cycle 1</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">1.548</td>
<td style="text-align: left;">7.380</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">1.989</td>
</tr>
<tr class="even">
<td style="text-align: left;">Households of Size 6+ in Life Cycle 1</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">2.013</td>
<td style="text-align: left;">9.643</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">2.159</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Households of Size 1 in Life Cycle 2</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="even">
<td style="text-align: left;">Households of Size 2 in Life Cycle 2</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.530</td>
<td style="text-align: left;">0.681</td>
<td style="text-align: left;">2.508</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">1.499</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Households of Size 3 in Life Cycle 2</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.675</td>
<td style="text-align: left;">1.344</td>
<td style="text-align: left;">4.437</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">1.738</td>
</tr>
<tr class="even">
<td style="text-align: left;">Households of Size 4 in Life Cycle 2</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">1.117</td>
<td style="text-align: left;">1.720</td>
<td style="text-align: left;">6.115</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">2.618</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Households of Size 5 in Life Cycle 2</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">2.473</td>
<td style="text-align: left;">1.818</td>
<td style="text-align: left;">8.310</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">3.282</td>
</tr>
<tr class="even">
<td style="text-align: left;">Households of Size 6+ in Life Cycle 2</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">3.819</td>
<td style="text-align: left;">1.916</td>
<td style="text-align: left;">10.703</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">3.852</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Households of Size 1 in Life Cycle 3</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.561</td>
<td style="text-align: left;">1.841</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.990</td>
</tr>
<tr class="even">
<td style="text-align: left;">Households of Size 2 in Life Cycle 3</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.009</td>
<td style="text-align: left;">1.149</td>
<td style="text-align: left;">3.673</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">1.928</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Households of Size 3 in Life Cycle 3</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.067</td>
<td style="text-align: left;">1.272</td>
<td style="text-align: left;">4.175</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">2.408</td>
</tr>
<tr class="even">
<td style="text-align: left;">Households of Size 4 in Life Cycle 3</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.427</td>
<td style="text-align: left;">1.404</td>
<td style="text-align: left;">4.676</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">2.676</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Households of Size 5 in Life Cycle 3</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">1.446</td>
<td style="text-align: left;">1.683</td>
<td style="text-align: left;">6.450</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">2.890</td>
</tr>
<tr class="even">
<td style="text-align: left;">Households of Size 6+ in Life Cycle 3</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">2.865</td>
<td style="text-align: left;">1.960</td>
<td style="text-align: left;">8.958</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">2.997</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<p><span style="font-size: 11px;"><em>Note for <a href="#tbl-tp-prod">Table&nbsp;1</a>: HBSch productions for each TAZ are divided into HBSch_Pr and HBSch_Sc based on their respective regional shares of total enrollment.</em></span></p>
<p>To calculate the total productions by trip purpose for each TAZ, the value of each variable is multiplied by the associated rate for that trip purpose and then summed over all the variables. Further division of Home-Based School trips into Primary and Secondary is done based on their respective regional shares of total enrollment. Productions for non-home-based trip purposes are further adjusted by the visitor adjustment factors in <a href="#tbl-visitor-adj">Table&nbsp;2</a>, which were taken from the 2012 Household Survey.</p>
<div class="grid">
<div class="g-col-3">

</div>
<div class="g-col-6">
<div class="cell" data-execution_count="2">
<div class="cell-output cell-output-display" data-execution_count="2">
<div id="tbl-visitor-adj" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;2: Visitor Adjustment Factors.</caption>
<colgroup>
<col style="width: 20%">
<col style="width: 30%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Trip Purpose</th>
<th style="text-align: left;">Visitor Adjustment Factor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">NHBW</td>
<td style="text-align: left;">1.046</td>
</tr>
<tr class="even">
<td style="text-align: left;">NHBNW</td>
<td style="text-align: left;">1.049</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="external-trip-productions" class="level3">
<h3 class="anchored" data-anchor-id="external-trip-productions">External Trip Productions</h3>
<p>Productions for internal-to-external (IX) trips are estimated by the model since the production occurs within the model space. The IX productions are taken as a share from the base productions and reassigned to the IX category. Ultimately, IX trips are not separated by trip purpose. But for the estimation of IX trip productions, trips are separated into two general trip purposes: work and non-work trips. Work trips include HBW. Non-Work trips include all other purposes except for school trips, which are excluded from external trips.</p>
<p>The share of productions that are IX work/non-work trips is shown in <a href="#tbl-ix-shares">Table&nbsp;3</a>. Typically shares of productions are in the 1% to 4% range for all counties except Box Elder, which ranges from 5% to 20% of all trip productions being IX trips.</p>
<div class="grid">
<div class="g-col-2">

</div>
<div class="g-col-8">
<div class="cell" data-execution_count="3">
<div class="cell-output cell-output-display" data-execution_count="3">
<div id="tbl-ix-shares" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;3: Internal-to-External Shares (2012 HH Survey)</caption>
<colgroup>
<col style="width: 12%">
<col style="width: 24%">
<col style="width: 24%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">County</th>
<th style="text-align: left;">Share IX Work Productions</th>
<th style="text-align: left;">Share IX Non-Work Productions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Box Elder</td>
<td style="text-align: left;">0.196</td>
<td style="text-align: left;">0.052</td>
</tr>
<tr class="even">
<td style="text-align: left;">Weber</td>
<td style="text-align: left;">0.035</td>
<td style="text-align: left;">0.016</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Davis</td>
<td style="text-align: left;">0.009</td>
<td style="text-align: left;">0.011</td>
</tr>
<tr class="even">
<td style="text-align: left;">Salt Lake</td>
<td style="text-align: left;">0.018</td>
<td style="text-align: left;">0.015</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Utah</td>
<td style="text-align: left;">0.017</td>
<td style="text-align: left;">0.01</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<p>After calculating the number of IX productions using the share values, these trips are removed from the base productions. Additionally, since IX productions are in vehicle-trips the final step in calculating IX productions is to multiply the person trips by vehicle occupancy rate of 1.54.</p>
<p>When calculating productions for the opposing direction, external-to-internal (XI), the TAZ values come directly from the <em>External_TripEnds.dbf</em> file as generated in the Input Processing scripts.</p>
</section>
<section id="short-haul-trucks-productions" class="level3">
<h3 class="anchored" data-anchor-id="short-haul-trucks-productions">Short-Haul Trucks Productions</h3>
<p>Short-Haul truck productions are calculated as a function of ecommerce variables, residential variables, and employment variables that vary by truck type. The overall formula used to calculate truck productions is as follows,</p>
<p><strong>Equation 1: Short-Haul Truck Productions</strong></p>
<ul>
<li><em>Good_p<sub>(TR)</sub> = Share_Ecom<sub>(TR)</sub> </em> (ResRate<sub>(TR)</sub> * TOTHH * Fac_ECom_HH<sub>(TR)</sub> + EmpRate<sub>(TR)</sub> * TOTEMP * Fac_ECom_Emp<sub>(TR)</sub>) + (1 - Share_ECom<sub>(TR)</sub>) * (ResRate<sub>(TR)</sub> * TOTHH)*</li>
</ul>
<p>where,</p>
<ul>
<li><em>TR</em> represents truck type (light, medium, or heavy),</li>
<li><em>Share_ECom</em> represents the proportion of truck trips that apply to eCommerce factors (See <a href="#tbl-share-ecom">Table&nbsp;4</a>),</li>
<li><em>ResRate</em> represents the residential variable (See <a href="#tbl-share-ecom">Table&nbsp;4</a>),</li>
<li><em>EmpRate</em> represents the employment variable (See <a href="#tbl-share-ecom">Table&nbsp;4</a>),</li>
<li><em>TOTHH</em> represents the total number of households in a given TAZ,</li>
<li><em>TOTEMP</em> represents the total employment in a given TAZ,</li>
<li><em>Fac_ECom_HH</em> represents the ecommerce factor applied to households (See <a href="#tbl-ecommerce-fcts">Table&nbsp;5</a>),</li>
<li>and <em>FAC_ECom_Emp</em> represents the ecommerce factor applied to employment (See <a href="#tbl-ecommerce-fcts">Table&nbsp;5</a>).</li>
</ul>
<div class="grid">
<div class="g-col-1">

</div>
<div class="g-col-10">
<div class="cell" data-execution_count="4">
<div class="cell-output cell-output-display" data-execution_count="4">
<div id="tbl-share-ecom" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;4: Proportion of Truck Trips to apply E-Commerce Factors</caption>
<colgroup>
<col style="width: 15%">
<col style="width: 25%">
<col style="width: 30%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">Light Truck Factor</th>
<th style="text-align: left;">Medium Truck Factor</th>
<th style="text-align: left;">Heavy Truck</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Share_Ecom</td>
<td style="text-align: left;">0.55</td>
<td style="text-align: left;">0.8</td>
<td style="text-align: left;">0.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">ResRate</td>
<td style="text-align: left;">0.74745</td>
<td style="text-align: left;">0.44427</td>
<td style="text-align: left;">0.17481</td>
</tr>
<tr class="odd">
<td style="text-align: left;">EmpRate</td>
<td style="text-align: left;">0.25703</td>
<td style="text-align: left;">0.1875</td>
<td style="text-align: left;">0.11021</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<p>The <em>Fac_ECom_HH</em> variable corresponds to the values in the <em>Households</em> rows in <a href="#tbl-ecommerce-fcts">Table&nbsp;5</a>. The <em>Fac_ECom_Emp</em> variable is computed as a function of the sum of the other variables in <a href="#tbl-ecommerce-fcts">Table&nbsp;5</a> multiplied by their corresponding employment types.</p>
<div class="grid">
<div class="g-col-1">

</div>
<div class="g-col-10">
<div class="cell" data-execution_count="5">
<div class="cell-output cell-output-display" data-execution_count="5">
<div id="tbl-ecommerce-fcts" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;5: Employment Factors by Scenario and Truck Type</caption>
<colgroup>
<col style="width: 10%">
<col style="width: 16%">
<col style="width: 20%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Scenario</th>
<th style="text-align: left;">Scenario Name</th>
<th style="text-align: left;">Goods Movement Category</th>
<th style="text-align: left;">Light Truck Factor</th>
<th style="text-align: left;">Medium Truck Factor</th>
<th style="text-align: left;">Heavy Truck Factor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">Base</td>
<td style="text-align: left;">Industrial</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: left;">Base</td>
<td style="text-align: left;">Retail</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">Base</td>
<td style="text-align: left;">Other</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: left;">Base</td>
<td style="text-align: left;">Households</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">Low</td>
<td style="text-align: left;">Industrial</td>
<td style="text-align: left;">1.15</td>
<td style="text-align: left;">1.05</td>
<td style="text-align: left;">1.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">Low</td>
<td style="text-align: left;">Retail</td>
<td style="text-align: left;">1.15</td>
<td style="text-align: left;">1.05</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">Low</td>
<td style="text-align: left;">Other</td>
<td style="text-align: left;">1.15</td>
<td style="text-align: left;">1.05</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">Low</td>
<td style="text-align: left;">Households</td>
<td style="text-align: left;">1.25</td>
<td style="text-align: left;">1.2</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">Medium</td>
<td style="text-align: left;">Industrial</td>
<td style="text-align: left;">1.2</td>
<td style="text-align: left;">1.1</td>
<td style="text-align: left;">1.15</td>
</tr>
<tr class="even">
<td style="text-align: left;">3</td>
<td style="text-align: left;">Medium</td>
<td style="text-align: left;">Retail</td>
<td style="text-align: left;">1.2</td>
<td style="text-align: left;">1.1</td>
<td style="text-align: left;">1.05</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">Medium</td>
<td style="text-align: left;">Other</td>
<td style="text-align: left;">1.2</td>
<td style="text-align: left;">1.1</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">3</td>
<td style="text-align: left;">Medium</td>
<td style="text-align: left;">Households</td>
<td style="text-align: left;">1.35</td>
<td style="text-align: left;">1.25</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">4</td>
<td style="text-align: left;">High</td>
<td style="text-align: left;">Industrial</td>
<td style="text-align: left;">1.25</td>
<td style="text-align: left;">1.15</td>
<td style="text-align: left;">1.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">High</td>
<td style="text-align: left;">Retail</td>
<td style="text-align: left;">1.25</td>
<td style="text-align: left;">1.15</td>
<td style="text-align: left;">1.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">4</td>
<td style="text-align: left;">High</td>
<td style="text-align: left;">Other</td>
<td style="text-align: left;">1.25</td>
<td style="text-align: left;">1.15</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">High</td>
<td style="text-align: left;">Households</td>
<td style="text-align: left;">1.45</td>
<td style="text-align: left;">1.3</td>
<td style="text-align: left;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<p>An additional adjustment factor is used during the calibration process to further tune the model results for trucks to match observed truck traffic. These adjustments are made at the three main groupings for short-haul productions and are shown in <a href="#tbl-sh-gen">Table&nbsp;6</a>. A factor of 1 means there is no adjustment.</p>
<div class="grid">
<div class="g-col-1">

</div>
<div class="g-col-10">
<div class="cell" data-execution_count="6">
<div class="cell-output cell-output-display" data-execution_count="6">
<div id="tbl-sh-gen" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;6: General Short Haul Truck Production/Attraction Factors</caption>
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Short-Haul Truck Category</th>
<th style="text-align: left;">Light Truck Factor</th>
<th style="text-align: left;">Medium Truck Factor</th>
<th style="text-align: left;">Heavy Truck Factor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">People</td>
<td style="text-align: left;">1.8</td>
<td style="text-align: left;">1.85</td>
<td style="text-align: left;">1.65</td>
</tr>
<tr class="even">
<td style="text-align: left;">Goods</td>
<td style="text-align: left;">1.8</td>
<td style="text-align: left;">1.85</td>
<td style="text-align: left;">1.65</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Services</td>
<td style="text-align: left;">1.8</td>
<td style="text-align: left;">1.85</td>
<td style="text-align: left;">1.65</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="estimate-attractions" class="level2">
<h2 class="anchored" data-anchor-id="estimate-attractions">Estimate Attractions</h2>
<p>The Trip Generation script estimates attractions for all trip purposes. Attractions are defined as the end of the trip that is serving as the attraction for a trip. For home-based trips (trips produced at a home location), attractions could include work locations, retail centers, restaurants, schools, colleges, etc. For non-home-based trips (trips produced at work or another locations), attractions could include delivery locations, restaurants, etc. The attractions for each TAZ are estimated in the following steps:</p>
<ol type="1">
<li>Calculate base attractions.</li>
<li>Calculate telecommuting attractions.</li>
<li>Calculate external-to-internal attractions and adjust base productions accordingly.</li>
<li>Adjust attractions based on CBD or area type.</li>
<li>Adjust truck attraction based on county.</li>
<li>Calculate attractions for short haul truck trips.</li>
<li>Calculate attraction adjustments for special generators.</li>
</ol>
<section id="base-attractions" class="level3">
<h3 class="anchored" data-anchor-id="base-attractions">Base Attractions</h3>
<p>Attractions are generated based on TAZ employment, enrollment, and household attributes. Whereas productions were mostly based on household attributes, attractions are primarily based on employment for most trip purposes with exceptions for HBSch that is based on enrollment and for HBOth, NHBW, and NHBNW with some household attractions. Attraction rates are shown in <a href="#tbl-tp-attract">Table&nbsp;7</a>.</p>
<div class="cell" data-execution_count="7">
<div class="cell-output cell-output-display" data-execution_count="7">
<div id="tbl-tp-attract" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;7: Attraction Rates by Trip Purpose.</caption>
<colgroup>
<col style="width: 19%">
<col style="width: 17%">
<col style="width: 6%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">TAZ Variable Description</th>
<th style="text-align: left;">TAZ Variable</th>
<th style="text-align: left;">HBW</th>
<th style="text-align: left;">HBSch_Pr</th>
<th style="text-align: left;">HBSch_Sc</th>
<th style="text-align: left;">HBShp</th>
<th style="text-align: left;">HBOth</th>
<th style="text-align: left;">NHBW</th>
<th style="text-align: left;">NHBNW</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Retail Employment</td>
<td style="text-align: left;">RETL</td>
<td style="text-align: left;">0.957</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">3.660</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">1.132</td>
<td style="text-align: left;">3.419</td>
</tr>
<tr class="even">
<td style="text-align: left;">Food Employment</td>
<td style="text-align: left;">FOOD</td>
<td style="text-align: left;">1.017</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">3.058</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">1.620</td>
<td style="text-align: left;">3.264</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Manufacturing Employment</td>
<td style="text-align: left;">MANU</td>
<td style="text-align: left;">1.136</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.019</td>
<td style="text-align: left;">0.231</td>
<td style="text-align: left;">0.037</td>
</tr>
<tr class="even">
<td style="text-align: left;">Wholesale Employment</td>
<td style="text-align: left;">WSLE</td>
<td style="text-align: left;">1.136</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.126</td>
<td style="text-align: left;">0.410</td>
<td style="text-align: left;">0.103</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Office Employment</td>
<td style="text-align: left;">OFFI</td>
<td style="text-align: left;">1.196</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.219</td>
<td style="text-align: left;">0.178</td>
<td style="text-align: left;">0.054</td>
</tr>
<tr class="even">
<td style="text-align: left;">Gov./Ed. Employment</td>
<td style="text-align: left;">GVED</td>
<td style="text-align: left;">1.196</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">2.455</td>
<td style="text-align: left;">0.250</td>
<td style="text-align: left;">0.452</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Health Employment</td>
<td style="text-align: left;">HLTH</td>
<td style="text-align: left;">1.136</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">1.135</td>
<td style="text-align: left;">0.185</td>
<td style="text-align: left;">0.446</td>
</tr>
<tr class="even">
<td style="text-align: left;">Other Employment</td>
<td style="text-align: left;">OTHR</td>
<td style="text-align: left;">1.136</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.902</td>
<td style="text-align: left;">0.200</td>
<td style="text-align: left;">0.242</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Agricultural Employment</td>
<td style="text-align: left;">FM_AGRI</td>
<td style="text-align: left;">1.136</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.200</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mining Employment</td>
<td style="text-align: left;">FM_MING</td>
<td style="text-align: left;">1.136</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.200</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Construction Employment</td>
<td style="text-align: left;">FM_CONS</td>
<td style="text-align: left;">1.136</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.200</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="even">
<td style="text-align: left;">Total Households</td>
<td style="text-align: left;">TOTHH</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">2.553</td>
<td style="text-align: left;">0.179</td>
<td style="text-align: left;">0.589</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Elementary Enrollment</td>
<td style="text-align: left;">ENROL_ELEM</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">1.000</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="even">
<td style="text-align: left;">Middle School Enrollment</td>
<td style="text-align: left;">ENROL_MIDL</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">1.000</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="odd">
<td style="text-align: left;">High School Enrollment</td>
<td style="text-align: left;">ENROL_HIGH</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">1.000</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="telecommuting-and-home-based-attractions" class="level3">
<h3 class="anchored" data-anchor-id="telecommuting-and-home-based-attractions">Telecommuting and Home-based Attractions</h3>
<p>Telecommuting and home-based jobs for each employment category are the calculated by applying the telecommuting rates taken from the model input files. Work-at-home jobs (HBJ) are added back into each employment category for the attraction calculations when calculating telecommuting. Telecommuting attractions are specified as either home-based work or non home-based work. <a href="#tbl-telecom">Table&nbsp;8</a> shows the rates applied to each job portion of the telecommutting function.</p>
<div class="grid">
<div class="g-col-1">

</div>
<div class="g-col-10">
<div class="cell" data-execution_count="8">
<div class="cell-output cell-output-display" data-execution_count="8">
<div id="tbl-telecom" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;8: Telecommuting Rates applied to each Job portion of the Telecommuting Function</caption>
<colgroup>
<col style="width: 15%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Job Type</th>
<th style="text-align: left;">Factor for HBW Telecommuting</th>
<th style="text-align: left;">Factor for NHBW Telecommuting</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">RETL</td>
<td style="text-align: left;">0.957</td>
<td style="text-align: left;">1.132</td>
</tr>
<tr class="even">
<td style="text-align: left;">FOOD</td>
<td style="text-align: left;">1.017</td>
<td style="text-align: left;">1.62</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MANU</td>
<td style="text-align: left;">1.136</td>
<td style="text-align: left;">0.231</td>
</tr>
<tr class="even">
<td style="text-align: left;">WSLE</td>
<td style="text-align: left;">1.136</td>
<td style="text-align: left;">0.41</td>
</tr>
<tr class="odd">
<td style="text-align: left;">OFFI</td>
<td style="text-align: left;">1.196</td>
<td style="text-align: left;">0.178</td>
</tr>
<tr class="even">
<td style="text-align: left;">GVED</td>
<td style="text-align: left;">1.196</td>
<td style="text-align: left;">0.25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HLTH</td>
<td style="text-align: left;">1.136</td>
<td style="text-align: left;">0.185</td>
</tr>
<tr class="even">
<td style="text-align: left;">OTHR</td>
<td style="text-align: left;">1.136</td>
<td style="text-align: left;">0.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AGRI</td>
<td style="text-align: left;">1.136</td>
<td style="text-align: left;">0.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">MING</td>
<td style="text-align: left;">1.136</td>
<td style="text-align: left;">0.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CONS</td>
<td style="text-align: left;">1.136</td>
<td style="text-align: left;">0.2</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<p>For performing scenario testing, the 1ControlCenter.block file for the model scenario contains a telecommuting factor that serves as a multiplier to all employment-based telecommuting calculations. The default value for this factor is 1. A value less than 1 decreases the telecommuting share and a value greater than 1 increases the telecommuting share.</p>
<p>An additional adjustment factor is used during the calibration process to further tune the model results for telecommuting to match the base year target. This model uses a telecommuting calibration factor of 1.</p>
</section>
<section id="external-trip-attractions" class="level3">
<h3 class="anchored" data-anchor-id="external-trip-attractions">External Trip Attractions</h3>
<p>The TAZ attractions for external-to-internal (XI) attractions is set to the number of total households (TOTHH) plus the total employment (TOTEMP). Since XI attractions are scaled to match productions, this means that XI attractions will be proportionally distributed by households plus employment amongst all TAZs.</p>
<p>Additional adjustment factors applied to XI attractions include county factors and a scaling factor. The county adjustment factors are shown in <a href="#tbl-county-adj-fcts">Table&nbsp;9</a>. The scaling factor used for the model is 0.010957.</p>
<div class="grid">
<div class="g-col-3">

</div>
<div class="g-col-6">
<div class="cell" data-execution_count="9">
<div class="cell-output cell-output-display" data-execution_count="9">
<div id="tbl-county-adj-fcts" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;9: IX Attraction County Adjustment Factors</caption>
<colgroup>
<col style="width: 12%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Job Type</th>
<th style="text-align: left;">XI Adjustment Factor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Box Elder</td>
<td style="text-align: left;">8.5741</td>
</tr>
<tr class="even">
<td style="text-align: left;">Weber</td>
<td style="text-align: left;">1.0061</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Davis</td>
<td style="text-align: left;">0.5437</td>
</tr>
<tr class="even">
<td style="text-align: left;">Salt Lake</td>
<td style="text-align: left;">0.9974</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Utah</td>
<td style="text-align: left;">0.8972</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<p>When calculating attractions for the opposing direction, internal-to-external (IX), the values come directly from the External_TripEnds.dbf file as generated in the Input Processing scripts.</p>
</section>
<section id="cbd-and-area-type-adjustments" class="level3">
<h3 class="anchored" data-anchor-id="cbd-and-area-type-adjustments">CBD and Area Type Adjustments</h3>
<p>Some trip purposed are further adjusted by select geographies. This allows for localized nuances to be applied when attraction rates may be atypical of regional rates. Two sets of adjustments are made. First, an adjustment of 0.5 is made to home-based shopping trips attracted to the CBD in Salt Lake County. Thus, shopping trips attracted to the CBD are half of what a non-CBD rate would be. Second, there are adjustments based on select area types for Davis and Salt Lake Counties. These adjustments are shown in <a href="#tbl-cbd-adj-fcts">Table&nbsp;10</a>. Attractions for urban area types are reduced 70% to 80% for select trip purposes. For CBD-like area types in Salt Lake County, there is an increase of 25% for home-based work trips showing a greater number of attractions compared as compared to similar areas in the rest of the region.</p>
<div class="grid">
<div class="g-col-2">

</div>
<div class="g-col-8">
<div class="cell" data-execution_count="10">
<div class="cell-output cell-output-display" data-execution_count="10">
<div id="tbl-cbd-adj-fcts" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;10: Adjustment Factors for Select Counties/Area Types</caption>
<colgroup>
<col style="width: 12%">
<col style="width: 15%">
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">County</th>
<th style="text-align: left;">Area Type</th>
<th style="text-align: left;">HBW</th>
<th style="text-align: left;">HBShp</th>
<th style="text-align: left;">HBOth</th>
<th style="text-align: left;">NHBNW</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Davis</td>
<td style="text-align: left;">Urban</td>
<td style="text-align: left;">0.8</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="even">
<td style="text-align: left;">Salt Lake</td>
<td style="text-align: left;">Urban</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">0.75</td>
<td style="text-align: left;">0.7</td>
<td style="text-align: left;">0.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Salt Lake</td>
<td style="text-align: left;">CBD-Like</td>
<td style="text-align: left;">1.25</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="county-truck-adjustments" class="level3">
<h3 class="anchored" data-anchor-id="county-truck-adjustments">County Truck Adjustments</h3>
<p>An additional adjustment factor is used during the calibration process to further tune the model results for medium and heavy trucks to match observed truck traffic. These adjustments are made at the three main groupings for short-haul attractions. Light trucks were low in Box Elder, Weber, Davis, and Utah County and high in Salt Lake county. Medium trucks were low in Box Elder and Davis county and high in Weber, Salt Lake, and Utah county. Heavy trucks were low in Box Elder, Davis, and Utah county and high in Weber and Salt Lake County. The factors as shown in <a href="#tbl-sh-area">Table&nbsp;11</a> were set to help offset these differences.</p>
<div class="grid">
<div class="g-col-1">

</div>
<div class="g-col-10">
<div class="cell" data-execution_count="11">
<div class="cell-output cell-output-display" data-execution_count="11">
<div id="tbl-sh-area" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;11: Area Specific Short Haul Truck Production/Attraction Factors</caption>
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Short-Haul Truck Category</th>
<th style="text-align: left;">Area</th>
<th style="text-align: left;">Light Truck Factor</th>
<th style="text-align: left;">Medium Truck Factor</th>
<th style="text-align: left;">Heavy Truck Factor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">People</td>
<td style="text-align: left;">Urban Spaces</td>
<td style="text-align: left;">1.03</td>
<td style="text-align: left;">0.9</td>
<td style="text-align: left;">0.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">Goods</td>
<td style="text-align: left;">Urban Spaces</td>
<td style="text-align: left;">1.03</td>
<td style="text-align: left;">0.9</td>
<td style="text-align: left;">0.9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Services</td>
<td style="text-align: left;">Urban Spaces</td>
<td style="text-align: left;">1.03</td>
<td style="text-align: left;">0.9</td>
<td style="text-align: left;">0.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">People</td>
<td style="text-align: left;">Box Elder</td>
<td style="text-align: left;">1.5</td>
<td style="text-align: left;">1.17</td>
<td style="text-align: left;">1.12</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Goods</td>
<td style="text-align: left;">Box Elder</td>
<td style="text-align: left;">1.5</td>
<td style="text-align: left;">1.17</td>
<td style="text-align: left;">1.12</td>
</tr>
<tr class="even">
<td style="text-align: left;">Services</td>
<td style="text-align: left;">Box Elder</td>
<td style="text-align: left;">1.5</td>
<td style="text-align: left;">1.17</td>
<td style="text-align: left;">1.12</td>
</tr>
<tr class="odd">
<td style="text-align: left;">People</td>
<td style="text-align: left;">Weber</td>
<td style="text-align: left;">1.22</td>
<td style="text-align: left;">0.96</td>
<td style="text-align: left;">0.96</td>
</tr>
<tr class="even">
<td style="text-align: left;">Goods</td>
<td style="text-align: left;">Weber</td>
<td style="text-align: left;">1.22</td>
<td style="text-align: left;">0.96</td>
<td style="text-align: left;">0.96</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Services</td>
<td style="text-align: left;">Weber</td>
<td style="text-align: left;">1.22</td>
<td style="text-align: left;">0.96</td>
<td style="text-align: left;">0.96</td>
</tr>
<tr class="even">
<td style="text-align: left;">People</td>
<td style="text-align: left;">Davis</td>
<td style="text-align: left;">1.14</td>
<td style="text-align: left;">1.08</td>
<td style="text-align: left;">1.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Goods</td>
<td style="text-align: left;">Davis</td>
<td style="text-align: left;">1.14</td>
<td style="text-align: left;">1.08</td>
<td style="text-align: left;">1.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Services</td>
<td style="text-align: left;">Davis</td>
<td style="text-align: left;">1.14</td>
<td style="text-align: left;">1.08</td>
<td style="text-align: left;">1.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">People</td>
<td style="text-align: left;">Salt Lake</td>
<td style="text-align: left;">0.59</td>
<td style="text-align: left;">0.62</td>
<td style="text-align: left;">0.54</td>
</tr>
<tr class="even">
<td style="text-align: left;">Goods</td>
<td style="text-align: left;">Salt Lake</td>
<td style="text-align: left;">0.59</td>
<td style="text-align: left;">0.62</td>
<td style="text-align: left;">0.54</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Services</td>
<td style="text-align: left;">Salt Lake</td>
<td style="text-align: left;">0.59</td>
<td style="text-align: left;">0.62</td>
<td style="text-align: left;">0.54</td>
</tr>
<tr class="even">
<td style="text-align: left;">People</td>
<td style="text-align: left;">Utah</td>
<td style="text-align: left;">1.19</td>
<td style="text-align: left;">0.95</td>
<td style="text-align: left;">1.01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Goods</td>
<td style="text-align: left;">Utah</td>
<td style="text-align: left;">1.19</td>
<td style="text-align: left;">0.95</td>
<td style="text-align: left;">1.01</td>
</tr>
<tr class="even">
<td style="text-align: left;">Services</td>
<td style="text-align: left;">Utah</td>
<td style="text-align: left;">1.19</td>
<td style="text-align: left;">0.95</td>
<td style="text-align: left;">1.01</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="adjustments-for-special-generators" class="level3">
<h3 class="anchored" data-anchor-id="adjustments-for-special-generators">Adjustments for Special Generators</h3>
<p>There are two groups of special generators that have adjustments for trip attractions. Temple Square and the SLC Library are in one group and colleges are in another.</p>
<section id="temple-square-and-slc-library" class="level4">
<h4 class="anchored" data-anchor-id="temple-square-and-slc-library">Temple Square and SLC Library</h4>
<p>Trip attractions for Temple Square and the SLC Library are generated using a base year daily visitation numbers and then increasing by an annual growth rate to estimate trip ends in the model year. The values used for estimation are shown in <a href="#tbl-lib">Table&nbsp;12</a>. Temple Square had an estimated five million visitors in 2013, which translates to roughly 13,700 visitors per day and 27,400 trip ends per day. The SLC library is the second most popular destination in Salt Lake with approximately four million visitors per year or roughly 11,000 visitors and 22,000 trip ends per day.</p>
<div class="grid">
<div class="g-col-1">

</div>
<div class="g-col-10">
<div class="cell" data-execution_count="12">
<div class="cell-output cell-output-display" data-execution_count="12">
<div id="tbl-lib" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;12: Adjustment Factors for Select Counties/Area Types</caption>
<colgroup>
<col style="width: 25%">
<col style="width: 15%">
<col style="width: 35%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Special Generator</th>
<th style="text-align: left;">Base Year</th>
<th style="text-align: left;">Base Year Daily Trip Ends</th>
<th style="text-align: left;">Annual Growth Rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Temple Square</td>
<td style="text-align: left;">2013</td>
<td style="text-align: left;">27400</td>
<td style="text-align: left;">1.0%</td>
</tr>
<tr class="even">
<td style="text-align: left;">SLC Library</td>
<td style="text-align: left;">2005</td>
<td style="text-align: left;">22000</td>
<td style="text-align: left;">1.0%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<p>After calculating model year attractions for the two special generators, the total attractions are then added to TAZ attractions proportionally amongst the trip purposes HBOth and NHBNW for the TAZ including Temple Square and HBOth, NHBW, and NHBNW for the TAZ including SLC Library.</p>
</section>
<section id="colleges" class="level4">
<h4 class="anchored" data-anchor-id="colleges">Colleges</h4>
<p><mark>???CHECK ENTIRE SECTION - we updated this but I forgot what we did</mark></p>
<p>There are several locations with the TDM where trips to and from colleges are estimated. Home-based college (HBC) trips are separately generated and distributed as part of the Input Processing scripts and are found in <code>TripTable.mtx</code>. HBC trips are those of enrolled students traveling to and from campus. These trips bypass Trip Generation and Trip Distribution scripts. The attractions for other trip purposes to colleges are generated together with the other trips within the containing TAZ. Adjustments are then made to account for additional attractions to colleges for the three trip purposes of HBOth, NHBW, and NHBNW.</p>
<p>HBOth, NHBW, and NHBNW trip adjustments are calculated through the following steps:</p>
<ol type="1">
<li><p>Calculate the number of full-time-equivalent (FTE) students per campus by multiplying the enrollment control total for a college campus from TripTableControlTotal.csv by the FTE rate for the college campus from College_Factors.csv.</p></li>
<li><p>Calculate the total attractions that should be generated based on the number of FTE students. This is done by multiplying the number of FTE students (step 1) by 2.4 vehicle attractions per student <strong>(based on all purposes from ITE, exact reference not included)</strong> multiplied by 1.7 person trips to vehicle trips <strong>(source not stated, is it the HHSurvey??)</strong>.</p></li>
<li><p>Calculate HBW trips associated with college campus in its containing TAZ with the following steps:</p>
<ol type="a">
<li>Multiply FTE students (step 1) by the college employment factor (see <a href="#tbl-colege-fcts">Table&nbsp;13</a>) to get the estimated number of employees for a college campus.</li>
<li>Divide the estimated number of employees for a college campus by the total employment (TOTEMP) for the containing TAZ to obtain a college employment ratio. The ratio is capped at 1.0.</li>
<li>The college employment ratio is then multiplied by the number of HBW trips to determine which portion of HBW are associated with the college.</li>
</ol></li>
<li><p>Calculate the number of non-HBC/HBW attractions to add to the TAZ by subtracting the college associated HBW trips (step 3) and HBC trips (TripTable.mtx) from the total attractions (step 2).</p></li>
<li><p>Distribute the additional attractions (step 4) proportionally amongst HBOth, NHBW, and NHBNW.</p></li>
</ol>
<div class="grid">
<div class="g-col-3">

</div>
<div class="g-col-6">
<div class="cell" data-execution_count="13">
<div class="cell-output cell-output-display" data-execution_count="13">
<div id="tbl-colege-fcts" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;13: College Employment Factors</caption>
<colgroup>
<col style="width: 30%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">College</th>
<th style="text-align: left;">College Employment Factor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Weber State University</td>
<td style="text-align: left;">0.25</td>
</tr>
<tr class="even">
<td style="text-align: left;">Utah Valley University</td>
<td style="text-align: left;">0.25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Salt Lake Community College</td>
<td style="text-align: left;">0.29</td>
</tr>
<tr class="even">
<td style="text-align: left;">LDSBC</td>
<td style="text-align: left;">0.33</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Westminster</td>
<td style="text-align: left;">0.33</td>
</tr>
<tr class="even">
<td style="text-align: left;">University of Utah</td>
<td style="text-align: left;">0.71</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brigham Young University</td>
<td style="text-align: left;">0.71</td>
</tr>
<tr class="even">
<td style="text-align: left;">Unspecified</td>
<td style="text-align: left;">0.48</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="balance-productions-and-attractions" class="level2">
<h2 class="anchored" data-anchor-id="balance-productions-and-attractions">Balance Productions and Attractions</h2>
<p>The final step of Trip Generation is to balance the productions and attractions. Balancing takes place by proportionally increasing or decreasing productions/attractions across the entire model space to match regional totals. For trips internal to the model space (non-externals) the attractions are balanced to match the productions. External trip productions and attractions are balanced in the WFRC/MAG model space. The IX productions are balanced to the IX attractions and the XI attractions are balanced to the XI productions.</p>
<p><mark>???Truck trips are already balanced since TAZ attractions were set equal TAZ productions.** –<strong>really?</strong>???</mark></p>
<p>There is also an important distinction to be understood regarding non-home-based trips. While non-home-based productions are based on household characteristics of a TAZ, the trips are not actually being produced in the home TAZ location. They are produced at another location, hence the term non-home-based. Non-home-based productions, thus, are only used to get total values that are then used to balance non-home-based attractions. After attractions are balanced to match productions, TAZ productions are set equal to TAZ attractions. So, non-home-based productions are used to get the quantity of trips, but attractions are used to get the distribution of trips.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left"><a href="https://wfrc.org"><img src="https://wfrc.org/wp-content/uploads/2021/11/logo.jpg" class="img-fluid" alt="WFRC" width="150"></a> <a href="https://mountainland.org/"><img src="https://mountainland.org/static/media/logo/svg/MAG_Logo_Horz_NoTag.svg" class="img-fluid" alt="MAG" width="65"></a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Built using <a href="https://quarto.org">Quarto</a></div>
  </div>
</footer>



</body></html>